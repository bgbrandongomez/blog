<link rel="import" href="/sitedata/bower_components/polymer/polymer.html">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<dom-module id="bible-verse">

<template>
  <style>
    .popup {
      display: none;
      position: absolute;
      background: #151515 url("../images/bkg.png") 0 0;
      border: 1px dashed #b5e853;
      cursor: pointer;
    }
    .popup > ::content {
      text-indent: 0;
      padding-left: 5px;
      padding-right: 5px;
      padding-top: 0px
      padding-bottom: 0px
      margin: 0;
      color: #b5e853;
      font-weight: bold;
     }
     .abbr {
       cursor: pointer;
       display: inline;
     }
  </style>

  <p class="popup"><content></content></p>

  <p class="abbr">{{ abbr }}</p></template>

  <script>
    Polymer({
      is: "bible-verse",
      ready: function(e) {
        if(screen.width < 800) {
          $('.popup').each(function(event) {
            $(".abbr").last().text($(this).text());
          });
        } else {
          $(".abbr").mousemove(function(event){
            $(this).prev().css({ "left": (event.pageX + 1) + "px","top": (event.pageY + 1) + "px" });
          });

          $(this).css("border-bottom-style", "dashed");
          $(this).css("border-width", "1px");
          $(this).css("border-color", "#b5e853");

          $(".abbr").hover(function(event) {
            $(this).prev().css("display", "inline");
          }, function() {
            $(this).prev().css("display", "none");
          });
        }
      }
    });
  </script>

</dom-module>
